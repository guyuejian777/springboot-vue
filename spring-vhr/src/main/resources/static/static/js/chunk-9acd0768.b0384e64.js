(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9acd0768"],{"038e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("备份恢复数据库")])])}],s=n("2877"),r={},l=Object(s["a"])(r,i,a,!1,null,null,null);t["default"]=l.exports},"05eb":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("初始化数据库")])])}],s=n("2877"),r={},l=Object(s["a"])(r,i,a,!1,null,null,null);t["default"]=l.exports},"16ba":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[n("el-button",{attrs:{type:"primary",size:""},on:{click:e.handleAddRole}},[e._v("添加角色")])],1),n("el-table",{staticStyle:{width:"70%","margin-top":"30px"},attrs:{data:e.rolesList,border:""}},[n("el-table-column",{attrs:{align:"center",label:"角色名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),n("el-table-column",{attrs:{align:"center",label:"中文角色",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.nameZh))]}}])}),n("el-table-column",{attrs:{label:"详细信息",align:"center",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",{staticClass:"link-type",on:{click:function(t){return e.handleFetchDetail(i)}}},[n("el-link",{attrs:{underline:!1,type:"primary"}},[e._v("可访问资源")])],1)]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEdit(t)}}},[e._v("修改")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v("删除")])]}}])})],1),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"修改角色":"新建角色"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticStyle:{"margin-top":"20px"}},[n("el-input",{attrs:{placeholder:"角色英文名称"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-input",{attrs:{placeholder:"角色英文名称"},model:{value:e.role.nameZh,callback:function(t){e.$set(e.role,"nameZh",t)},expression:"role.nameZh"}})],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-tree",{ref:"tree",attrs:{props:e.defaultProps,data:e.treeData,"default-checked-keys":e.checkedKeys,"node-key":"id","show-checkbox":"","highlight-current":"","default-expand-all":""}})],1),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmRole}},[e._v("确认")])],1)]),n("el-dialog",{attrs:{visible:e.dialogDetailVisible,title:e.role.nameZh},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[n("el-tree",{ref:"tree",attrs:{props:e.defaultProps,data:e.treeData,"default-checked-keys":e.checkedKeys,"node-key":"id","show-checkbox":"","highlight-current":"","default-expand-all":""}})],1)],1)},a=[],s=(n("7f7f"),n("96cf"),n("3b8d")),r=n("ed08"),l={id:"",name:"",nameZh:""},o={data:function(){return{role:Object.assign({},l),treeData:[],rolesList:[],checkedKeys:[],dialogVisible:!1,dialogDetailVisible:!1,loading:!1,dialogType:"new",defaultProps:{children:"children",label:"name"}}},mounted:function(){this.loading=!0,this.getRoles()},methods:{getRoles:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/system/basicMsg/roles").then((function(e){var n=e.data;t.rolesList=n}));case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMenuTree:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/system/basicMsg/menuTree/").then((function(e){var n=e.data;t.treeData=n.menus}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.role=Object.assign({},l),this.checkedKeys=[],e.next=4,this.getMenuTree();case 4:this.dialogType="new",this.dialogVisible=!0;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTreeDataAndKesy:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.role=Object(r["a"])(t),e.next=3,this.$http.get("/system/basicMsg/menuTree/"+t.id).then((function(e){var t=e.data;n.treeData=t.menus,n.checkedKeys=t.mids}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getTreeDataAndKesy(t.row);case 2:this.dialogType="edit",this.dialogVisible=!0;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleFetchDetail:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getTreeDataAndKesy(t);case 2:this.dialogDetailVisible=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this,n=e.$index,i=e.row;this.$confirm("Confirm to remove the role?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.delete("/system/basicMsg/role/"+i.id).then((function(){t.rolesList.splice(n,1),t.$message({type:"success",message:"删除成功!"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},confirmRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,s,r,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,null!=this.role.name&&""!=this.role.name&&null!=this.role.nameZh&&""!=this.role.nameZh){e.next=3;break}return e.abrupt("return");case 3:if(t="edit"===this.dialogType,n=this.$refs.tree.getCheckedKeys(!0),console.log(n),i={id:this.role.id,name:this.role.name,nameZh:this.role.nameZh,mids:n.join(",")},!t){e.next=12;break}return e.next=10,this.$http.put("/system/basicMsg/role",this.$qs.stringify(i)).then((function(){l.$message({type:"success",message:"修改成功"}),l.getRoles()}));case 10:e.next=14;break;case 12:return e.next=14,this.$http.post("/system/basicMsg/role",this.$qs.stringify(i)).then((function(e){l.$message({type:"success",message:"新增成功！"}),l.getRoles()})).catch((function(){l.$message({type:"error",message:"新增失败！"})}));case 14:a=this.role,s=a.name,r=a.nameZh,this.dialogVisible=!1,this.$notify({title:"成功！",dangerouslyUseHTMLString:!0,message:"\n            <div>角色名称: ".concat(r,"</div>\n            <div>Role Nmae: ").concat(s,"</div>\n          "),type:"success"});case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},c=o,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,"73cce9b9",null);t["default"]=d.exports},"3e31":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[n("el-button",{attrs:{type:"primary",size:""},on:{click:e.handleAddPosition}},[e._v(e._s(e.addButton))])],1),n("el-table",{staticStyle:{width:"80%","margin-top":"30px"},attrs:{data:e.dataList,stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{align:"center",label:"编号",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id))]}}])}),n("el-table-column",{attrs:{align:"center",label:"position"==e.state?"职位名称":"职称名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),"jobTitle"==e.state?n("el-table-column",{attrs:{align:"center",label:"职称级别",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.titleLevel))]}}],null,!1,402436907)}):e._e(),n("el-table-column",{attrs:{align:"center",label:"创建时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dataFormat")(t.row.createDate,"yyyy-MM-dd")))]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEdit(t)}}},[e._v("修改")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v("删除")])]}}])})],1),n("div",{staticStyle:{"text-align":"left"}},[e.dataList.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:e.multipleSelection.length<1},on:{click:e.deleteSelection}},[e._v("批量删除")]):e._e()],1)],1),n("el-dialog",{attrs:{visible:e.dialogVisible,width:"25%",title:"edit"===e.dialogType?"修改":"新建"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{},["jobTitle"==e.state?n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"职称等级"},model:{value:e.titleLevel,callback:function(t){e.titleLevel=t},expression:"titleLevel"}},e._l(e.titleLevels,(function(e,t){return n("div",{key:t},[n("el-option",{attrs:{label:e,value:e}})],1)})),0):e._e(),n("el-input",{staticStyle:{width:"200px",margin:"10px"},attrs:{placeholder:"请输入新的..."},model:{value:e.dialogName,callback:function(t){e.dialogName=t},expression:"dialogName"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirmPosition}},[e._v("Confirm")])],1)])],1)},a=[],s=(n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),r=(n("ed08"),{id:"",name:"",createDate:""}),l={id:"",name:"",titleLevel:"",createDate:""},o={data:function(){return{position:Object.assign({},r),jobTitle:Object.assign({},l),dataList:[],checkedKeys:[],dialogVisible:!1,loading:!1,dialogType:"new",indexx:0,dialogName:"",titleLevel:"",titleLevels:["正高级","副高级","中级","初级","员级"],addButton:"position"==this.state?"添加职位":"添加职称",multipleSelection:[]}},props:["state"],mounted:function(){this.loading=!0,this.getDataList()},methods:{handleSelectionChange:function(e){this.multipleSelection=e},deleteSelection:function(){var e=this;this.$confirm("确定删除"+this.multipleSelection.length+"条数据吗？?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="",e.multipleSelection.forEach((function(e){n=n+e.id+","})),n=n.substring(0,n.length-1),t.next=5,e.doDelete(n);case 5:e.getDataList();case 6:case"end":return t.stop()}}),t)})))).catch((function(t){e.$message({type:"info",message:"已取消删除!"})}))},getDataList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("position"==this.state?"/system/basicMsg/position/all":"/system/basicMsg/jobTitle/all").then((function(e){var n=e.data;t.dataList=n}));case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddPosition:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.position=Object.assign({},r),this.dialogType="new",this.dialogVisible=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleEdit:function(e){this.dialogName=e.row.name,this.position.id=e.row.id,this.titleLevel=e.row.titleLevel,this.dialogType="edit",this.dialogVisible=!0},doDelete:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="position"==this.state?"/system/basicMsg/position/":"/system/basicMsg/jobTitle/",e.next=3,this.$http.delete(n+t).then((function(){i.$message({type:"success",message:"删除成功!"})}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.$index,i=t.row,this.$confirm("确定删除"+i.name+"吗？?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.doDelete(i.id);case 2:a.dataList.splice(n,1);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){a.$message({type:"info",message:"已取消删除!"})}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),confirmPosition:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,null!=this.dialogName&&""!=this.dialogName){e.next=3;break}return e.abrupt("return");case 3:if(t="edit"===this.dialogType,n="position"==this.state?{id:this.position.id,name:this.dialogName}:{id:this.position.id,name:this.dialogName,titleLevel:this.titleLevel},i="position"==this.state?{name:this.dialogName}:{name:this.dialogName,titleLevel:this.titleLevel},!t){e.next=11;break}return e.next=9,this.$http.put("position"==this.state?"/system/basicMsg/position":"/system/basicMsg/jobTitle",this.$qs.stringify(n)).then((function(){s.$message({type:"success",message:"修改成功"}),s.getDataList()}));case 9:e.next=13;break;case 11:return e.next=13,this.$http.post("position"==this.state?"/system/basicMsg/position":"/system/basicMsg/jobTitle",this.$qs.stringify(i)).then((function(e){s.$message({type:"success",message:"新增成功！"}),s.getDataList()})).catch((function(){s.$message({type:"error",message:"新增失败！"})}));case 13:a=this.dialogName,this.dialogVisible=!1,this.$notify({title:"成功！",dangerouslyUseHTMLString:!0,message:"\n            <div>职位名称: ".concat(a,"</div>\n          "),type:"success"});case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},c=o,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,"46eb945a",null);t["default"]=d.exports},5392:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("系统管理")])])}],s=n("2877"),r={},l=Object(s["a"])(r,i,a,!1,null,null,null);t["default"]=l.exports},"55d7":function(e,t,n){"use strict";var i=n("c8fe"),a=n.n(i);a.a},c433:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"box-toolbar",attrs:{align:"left"}},[n("div",{staticClass:"search-bar"},[n("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"输入部门名称搜索部门...","prefix-icon":"el-icon-search",size:"mini"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)]),n("div",{staticClass:"custom-tree-container"},[n("el-tree",{ref:"tree",staticClass:"filter-tree",staticStyle:{width:"500px","margin-top":"10px"},attrs:{props:e.defaultProps,data:e.treeData,"highlight-current":"","default-expand-all":"","render-content":e.renderContent,"filter-node-method":e.filterNode}})],1),n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{attrs:{title:"添加部门",visible:e.dialogVisible,width:"25%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("span",[e._v("上级部门")]),n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.department.pid,callback:function(t){e.$set(e.department,"pid",t)},expression:"department.pid"}},e._l(e.allDep,(function(e){return n("div",{key:e.id},[n("el-option",{attrs:{label:e.name,value:e.id}})],1)})),0)],1),n("div",{staticStyle:{"margin-top":"10px"}},[n("span",[e._v("部门名称")]),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.department.name,callback:function(t){e.$set(e.department,"name",t)},expression:"department.name"}})],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmAppend}},[e._v("确 定")])],1)])],1)])},a=[],s=(n("7f7f"),{data:function(){return{treeData:[],filterText:"",department:{name:"",pid:""},defaultProps:{children:"children",isLeaf:"leaf",label:"name"},allDep:[],dialogVisible:!1}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},getTreeData:function(){var e=this;this.$http.get("system/basicMsg/departments/-1").then((function(t){var n=t.data;e.treeData=n}))},getAllDepartment:function(){var e=this;this.$http.get("system/basicMsg/departments").then((function(t){var n=t.data;e.allDep=n}))},append:function(e){this.dialogVisible=!0,this.getAllDepartment(),this.department.pid=e.id},confirmAppend:function(){var e=this;null!=this.department.name&&""!=this.department.name&&null!=this.department.pid&&""!=this.department.pid&&this.$http.post("system/basicMsg/departments",{name:this.department.name,parentId:this.department.pid}).then((function(t){var n=t.data;e.department.name="",e.department.pid="",e.setDataToTree(e.treeData,n),e.dialogVisible=!1}))},setDataToTree:function(e,t){for(var n=0;n<e.length;n++){if(e[n].id==t.parentId)return void e[n].children.push(t);this.setDataToTree(e[n].children,t)}},remove:function(e,t){var n=this;t.children.length>0?this.$message({type:"error",message:"该部门下还有其他部门，不能删除"}):this.$confirm("此操作将永久"+t.name+"部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$http.delete("system/basicMsg/departments/"+t.id).then((function(e){405==e.status?n.$message({type:"warning",message:"该部门尚有员工或有子部门"}):200==e.status&&(n.deleteFromTree(n.treeData,t),n.$notify({title:"删除成功！",dangerouslyUseHTMLString:!0,message:"\n            <div>部门名称: ".concat(t.name,"</div>\n            <div>部门id: ").concat(t.id,"</div>\n          "),type:"success"}))}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},deleteFromTree:function(e,t){for(var n=0;n<e.length;n++){if(e[n].id==t.id)return void e.splice(n,1);this.deleteFromTree(e[n].children,t)}},renderContent:function(e,t){var n=this,i=t.node,a=t.data;t.store;return e("span",{class:"custom-tree-node"},[e("span",[i.label]),e("span",[e("el-button",{style:"font-size: 12px; padding:3px",attrs:{size:"mini",type:"primary"},on:{click:function(){return n.append(a)}}},["添加部门"]),e("el-button",{style:"font-size: 12px; padding:3px",attrs:{size:"mini",type:"danger"},on:{click:function(){return n.remove(i,a)}}},["删除部门"])])])}},mounted:function(){this.getTreeData()}}),r=s,l=(n("55d7"),n("2877")),o=Object(l["a"])(r,i,a,!1,null,null,null);t["default"]=o.exports},c8fe:function(e,t,n){},cfc7:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box",staticStyle:{margin:"10px"}},[n("div",{staticClass:"box-toolbar"},[n("div",{staticClass:"search-bar",attrs:{align:"left"}},[n("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"默认展示部分用户，可以通过用户名搜索更多用户...","prefix-icon":"el-icon-search",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{stripe:!0,data:e.hrs}},[n("el-table-column",{attrs:{align:"center",width:"90",label:"用户角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"right",title:"角色列表",width:"200",trigger:"click"},on:{hide:function(n){return e.handleUpdateHrRoles(t.row,t.$index)}}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.selRoles,callback:function(t){e.selRoles=t},expression:"selRoles"}},e._l(e.allRoles,(function(e){return n("el-option",{key:e.id,attrs:{label:e.nameZh,value:e.id}})})),1),n("el-button",{staticStyle:{color:"#09c0f6"},attrs:{slot:"reference",type:"text",icon:"el-icon-more",disabled:e.moreBtnState},on:{click:function(n){return e.loadSelRoles(t)}},slot:"reference"})],1)]}}])}),n("el-table-column",{attrs:{align:"center",width:"90","class-name":"text-mono",label:"名字"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),n("el-table-column",{attrs:{align:"center",width:"150","class-name":"text-mono",label:"电话号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.phone))]}}])}),n("el-table-column",{attrs:{width:"150",align:"center",label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用",size:"mini"},on:{change:function(n){return e.handleSwitch(t.row)}},model:{value:t.row.enabled,callback:function(n){e.$set(t.row,"enabled",n)},expression:"scope.row.enabled"}})]}}])}),n("el-table-column",{attrs:{width:"60",align:"center",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50px"},attrs:{src:e.row.userface}})]}}])}),n("el-table-column",{attrs:{align:"center",width:"160","class-name":"text-mono",label:"用户角色"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roles,(function(t){return n("el-tag",{key:t.id,attrs:{type:"success",effect:"dark",size:"mini",closable:""}},[e._v(e._s(t.nameZh))])}))}}])}),n("el-table-column",{attrs:{align:"center",width:"79","class-name":"text-mono",label:"删除"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{color:"#F6061b",width:"20px",heigh:"20px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleHrDelete(t)}}})]}}])}),n("el-table-column",{attrs:{align:"center","class-name":"text-mono",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.remark))]}}])})],1),e.pagination?n("div",{staticClass:"bp-pages"},[n("el-pagination",{attrs:{background:!0,"current-page":e.pagination.currentPage,"page-size":e.pagination.rowsPerPage||10,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange}})],1):e._e()],1)},a=[],s=(n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),r=(n("386d"),{data:function(){return{loading:!0,search:"",hrs:[],totalHrs:0,pagination:{},moreBtnState:!1,allRoles:[],selRoles:[]}},watch:{pagination:{deep:!0,handler:function(){this.getHrs()}},search:{handler:function(){this.getHrs()}}},methods:{handleCurrentChange:function(e){this.pagination.currentPage=e,this.getHrs()},getHrs:function(){var e=this;this.loading=!0,this.$http.get("/system/hr",{params:{key:""===this.search?"all":this.search,page:this.pagination.currentPage,rows:this.pagination.rowsPerPage}}).then((function(t){e.hrs=t.data.items,e.totalHrs=t.data.total,e.loading=!1})).catch((function(){e.$message({type:"error",message:"出现错误！"})}))},getRoles:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/system/basicMsg/roles").then((function(e){var n=e.data;t.allRoles=n}));case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadSelRoles:function(e){var t=this,n=e.row;e.rowIndex;this.moreBtnState=!0,this.selRoles=[],n.roles.forEach((function(e){t.selRoles.push(e.id)}))},handleUpdateHrRoles:function(e,t){var n=this;this.moreBtnState=!1;var i={hrId:e.id,rids:this.selRoles.join(",")};this.$http.put("/system/hr/roles",this.$qs.stringify(i)).then((function(){n.reloadHr(e.id,t)}))},reloadHr:function(e,t){var n=this;this.$http.get("/system/hr/"+e).then((function(e){var i=e.data;n.hrs.splice(t,1,i),n.selRoles=[]}))},handleSwitch:function(e){var t=this;this.$http.put("/system/hr/switch",this.$qs.stringify({id:e.id,enabled:e.enabled})).then((function(){t.$notify({title:"更新成功！",dangerouslyUseHTMLString:!0,message:"\n            <div>名字: ".concat(e.name,"</div>\n            <div>用户状态: ").concat(e.enabled,"</div>\n          "),type:"success"})}))},handleHrDelete:function(e){var t=this;this.$http.delete("system/hr/"+e.row.id).then((function(){t.$notify({title:"删除成功！",dangerouslyUseHTMLString:!0,message:"\n            <div>名字: ".concat(row.name,"</div>\n            <div>用户状态: 已删除！</div>\n          "),type:"success"}),t.hrs.splice(e.$index,1)}))}},created:function(){this.getHrs(),this.getRoles()}}),l=r,o=n("2877"),c=Object(o["a"])(l,i,a,!1,null,null,null);t["default"]=c.exports},d748:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("操作日志管理")])])}],s=n("2877"),r={},l=Object(s["a"])(r,i,a,!1,null,null,null);t["default"]=l.exports},e91b:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"部门管理",name:"departmentMana"}},[n("department-mana")],1),n("el-tab-pane",{attrs:{label:"职位管理",name:"jobMana"}},[n("job-mana",{attrs:{state:"position"}})],1),n("el-tab-pane",{attrs:{label:"职称管理",name:"jobTitleMana"}},[n("job-mana",{attrs:{state:"jobTitle"}})],1),n("el-tab-pane",{attrs:{label:"奖惩规则",name:"rpRules"}},[n("rp-rules")],1),n("el-tab-pane",{attrs:{label:"权限组",name:"permission"}},[n("menu-role")],1)],1)],1)},a=[],s=n("c433"),r=n("3e31"),l=n("fc67"),o=n("16ba"),c={data:function(){return{activeName:"departmentMana"}},methods:{handleClick:function(e,t){}},components:{DepartmentMana:s["default"],JobMana:r["default"],RpRules:l["default"],MenuRole:o["default"]}},u=c,d=n("2877"),h=Object(d["a"])(u,i,a,!1,null,null,null);t["default"]=h.exports},fc67:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("奖惩规则")])])}],s=n("2877"),r={},l=Object(s["a"])(r,i,a,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-9acd0768.b0384e64.js.map